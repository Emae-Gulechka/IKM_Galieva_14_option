# IKM_Galieva_14_option
Описание

Реализуйте с помощью двусвязного циклического списка следующую игру: Ученики школы встают в круг. Один ученик пишет программу, генерирующую случайное целое число из промежутка [–10;10]. Если выпало положительное число, то отсчёт ведётся «по часовой стрелке», если отрицательное, то «против часовой». Ученик, на котором остановился счёт, не выбывает из круга, а делает «доброе дело» и уровень его рейтинга увеличивается на 1. Следующий отсчёт начинается с ученика, стоящего в круге рядом с тем, который только что делал «доброе дело», с правого (если отсчёт ведётся по часовой стрелке) или с левого (против часовой). После того, как игра всем надоела, нужно вывести список учеников в порядке невозрастания рейтинга. Если имеется несколько учеников с одинаковым рейтингом, то их нужно выводить в том порядке, в котором они поступили в список. Исходный список фамилий учеников для игры находится в текстовом файле. В начале игры рейтинг каждого ученика равен 0. Во время игры нужно выводить протокол: какое случайное число выпало, какой ученик делал доброе дело и рейтинг ученика после совершения доброго дела. Количество раундов игры вводится пользователем с клавиатуры.

Возможности

•   **Чтение списка учеников из файла:** Программа считывает имена учеников из текстового файла, указанного пользователем.
•   **Добавление новых учеников:** Предоставляется возможность добавить новых учеников в файл через консольный ввод.
•   **Кольцевой двусвязный список:** Имена учеников хранятся в кольцевом двусвязном списке для удобства циклического перемещения.
•   **Случайный выбор направления и количества шагов:** В каждом раунде генерируется случайное число, определяющее направление (по часовой стрелке или против) и количество шагов для отсчета.
•   **Ведение рейтинга учеников:** Рейтинг каждого ученика увеличивается, если он делает "доброе дело".
•   **Вывод протокола игры:** В каждом раунде выводится информация о выпавшем числе, ученике, совершившем "доброе дело", и его текущем рейтинге.
•   **Сортировка учеников по рейтингу:** В конце игры ученики сортируются по убыванию рейтинга, а при равенстве рейтингов сохраняется порядок добавления в список.
•   **Указание количества раундов:** Пользователь может указать количество раундов игры.
•   **Обработка ошибок:** Предусмотрена обработка ошибок при чтении/записи файлов и некорректном вводе данных.

Алгоритм решения

1. Чтение данных из файла:
  •  Использовать класс StudentFileHandler для работы с файлом, содержащим фамилии учеников.
  •  Метод read_students класса StudentFileHandler читает построчно файл и создаёт кольцевой двусвязный список CircularDoublyLinkedList, где каждый элемент – узел StudentNode, содержащий фамилию ученика, рейтинг (изначально 0) и порядковый номер добавления.
  •  Метод add_students класса StudentFileHandler позволяет добавлять новые фамилии учеников в файл.
2. Представление данных:
  •  Для хранения списка учеников используется кольцевой двусвязный список (CircularDoublyLinkedList).
    *  Обоснование выбора: Кольцевая структура обеспечивает возможность циклического перемещения по списку, что необходимо для моделирования круга учеников. Двусвязность позволяет легко перемещаться как в прямом, так и в обратном направлении, что требуется для отсчёта в обе стороны.
  •  Каждый ученик представлен объектом класса StudentNode, содержащим:
      name: Фамилия ученика (строка).
      rating: Рейтинг ученика (целое число).
      prev: Ссылка на предыдущий узел в списке.
      next: Ссылка на следующий узел в списке.
      order: Порядковый номер добавления ученика в список (целое число). Это необходимо для обеспечения стабильной сортировки при одинаковом рейтинге.
  *  Обоснование выбора типов данных: Строки для фамилий и целые числа для рейтингов и порядкового номера добавления являются наиболее подходящими типами данных для представления этой информации.
3. Игровая логика:
  •  Класс Game инкапсулирует игровую логику.
  •  Метод play моделирует раунды игры.
  •  Для каждого раунда:
    *  Генерируется случайное целое число в диапазоне [-10, 10] (исключая 0).
    *  В зависимости от знака числа определяется направление отсчёта (по часовой или против часовой стрелки).
    *  Происходит перемещение по списку на соответствующее количество позиций.
    *  Увеличивается рейтинг ученика, на котором остановился отсчёт.
    *  Выводится протокол раунда.
  •  После завершения всех раундов метод print_sorted_students сортирует список учеников по убыванию рейтинга (при равенстве рейтингов – по порядку добавления) и выводит отсортированный список.
4. Сортировка:
  •  Используется метод sort встроенного списка Python с функцией lambda в качестве ключа сортировки. Сортировка выполняется сначала по убыванию рейтинга (-s.rating), а затем по возрастанию порядка добавления (s.order). Это гарантирует стабильную сортировку при одинаковых рейтингах.


5. Обработка ввода пользователя:
  •  Класс InputHandler обеспечивает безопасный ввод положительного целого числа для количества раундов. Он обрабатывает исключения ValueError (некорректный ввод) и KeyboardInterrupt (прерывание ввода пользователем).

Использование

1. После запуска программа предложит ввести новые фамилии учеников для добавления в файл students.txt. Для завершения ввода оставьте строку пустой и нажмите Enter.
2. Далее программа запросит количество раундов игры. Введите положительное целое число и нажмите Enter.
3. Программа выведет протокол каждого раунда игры, включая выпавшее число, ученика, сделавшего "доброе дело", и его рейтинг.
4. В конце игры будет выведен список учеников, отсортированный по убыванию рейтинга.

Структура проекта

•  main.py: Основной файл программы.
•  students.txt: Файл, содержащий список фамилий учеников (должен быть создан пользователем или будет предложено создание при первом запуске).
•  README.md: Этот файл с описанием проекта.

Классы и методы

•  StudentNode: Класс, представляющий ученика в списке.
  •  __init__(self, name, order): Конструктор, принимающий имя ученика и его порядковый номер добавления.
•  CircularDoublyLinkedList: Класс, представляющий кольцевой двусвязный список учеников.
  •  __init__(self): Конструктор.
  •  append(self, name): Добавляет нового ученика в конец списка.
  •  __iter__(self): Итератор для прохода по списку.
  •  to_list(self): Преобразует список в обычный Python List.
•  StudentFileHandler: Класс для работы с файлом учеников.
  •  __init__(self, filename): Конструктор, принимающий имя файла.
  •  read_students(self): Читает учеников из файла и создает кольцевой список.
  •  add_students(self): Добавляет новых учеников в файл, получая фамилии с консольного ввода.
•  Game: Класс, управляющий игрой.
  •  __init__(self, students): Конструктор, принимающий кольцевой список учеников.
  •  play(self, rounds): Запускает игру на заданное количество раундов.
  •  print_sorted_students(self): Выводит отсортированный список учеников.
•  InputHandler: Класс для обработки ввода пользователя.
  •  get_positive_int(self, prompt): Запрашивает у пользователя положительное целое число, обеспечивая обработку ошибок.
